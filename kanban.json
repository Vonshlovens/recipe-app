{
  "columns": ["backlog", "in-progress", "review", "done"],
  "tasks": [
    {
      "id": "RDM-001",
      "title": "Define recipe TypeScript types from schema",
      "description": "Create TypeScript interfaces/types for the full recipe schema: Recipe, RecipeSource, RecipeTags, Servings, and related types.",
      "spec": "specs/recipe-data-model.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "RDM-002",
      "title": "Implement ULID generation for recipe IDs",
      "description": "Add ULID dependency and create a utility for generating recipe IDs.",
      "spec": "specs/recipe-data-model.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "RDM-003",
      "title": "Build YAML frontmatter parser",
      "description": "Parse Markdown files with YAML frontmatter into structured Recipe objects. Handle the frontmatter/body split.",
      "spec": "specs/recipe-data-model.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "RDM-004",
      "title": "Build YAML frontmatter serializer",
      "description": "Serialize a Recipe object back into a Markdown file with YAML frontmatter.",
      "spec": "specs/recipe-data-model.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "RDM-005",
      "title": "Implement frontmatter validation",
      "description": "Validate all frontmatter fields per spec: ULID format, title length, slug format, servings positivity, ISO 8601 durations, difficulty enum, source.type enum, tag format regex.",
      "spec": "specs/recipe-data-model.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "RDM-006",
      "title": "Implement Markdown body validation",
      "description": "Validate that the body contains required ## Ingredients and ## Instructions sections with at least one list item each, and that total body size is under 50,000 characters.",
      "spec": "specs/recipe-data-model.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "RDM-007",
      "title": "Implement slug generation with collision avoidance",
      "description": "Generate URL-safe slugs from recipe titles. Handle collisions by appending -2, -3, etc. Regenerate slug on title change.",
      "spec": "specs/recipe-data-model.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "RDM-008",
      "title": "Implement on-save logic (updatedAt, totalTime calc)",
      "description": "On save: set updatedAt to current time, recalculate totalTime from prepTime + cookTime if both present and totalTime not explicitly set.",
      "spec": "specs/recipe-data-model.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "RDM-009",
      "title": "Define tag taxonomy constants and validation",
      "description": "Create constants for built-in tag groups (cuisine, meal, diet, technique, custom) and validate tag values against the regex /^[a-z0-9-]{1,50}$/ with max 20 tags per group.",
      "spec": "specs/recipe-data-model.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "RDM-010",
      "title": "Write unit tests for recipe data model",
      "description": "Test parsing, serialization, validation (valid and invalid cases), slug generation, on-save logic, and tag validation.",
      "spec": "specs/recipe-data-model.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "DB-001",
      "title": "Set up SQLite database connection",
      "description": "Initialize SQLite database using Deno's SQLite module. Create the database file and connection utility with proper error handling.",
      "spec": "specs/database.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "DB-002",
      "title": "Create migration runner",
      "description": "Build a lightweight migration runner that tracks applied migrations in a _migrations table, applies unapplied migrations in order on startup, and runs each migration in a transaction.",
      "spec": "specs/database.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "DB-003",
      "title": "Write initial schema migrations",
      "description": "Create the sequential migration SQL files: 001_create_recipes.sql (recipes table with all columns and constraints), 002_create_recipe_tags.sql (normalized tags table), 003_create_fts.sql (FTS5 virtual table).",
      "spec": "specs/database.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "DB-004",
      "title": "Create index migrations",
      "description": "Write migration for standard indexes: slug uniqueness, created_at, updated_at, difficulty, and tag query indexes (group+value composite, value-only).",
      "spec": "specs/database.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "DB-005",
      "title": "Implement recipe write path (insert/update)",
      "description": "Build the transactional write path: insert/update recipes row, delete and re-insert recipe_tags, and update the FTS index — all within a single transaction.",
      "spec": "specs/database.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "DB-006",
      "title": "Implement recipe read queries",
      "description": "Build query functions for: get recipe by slug, get recipe by ID, list recipes with pagination and sorting (by created_at, updated_at).",
      "spec": "specs/database.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "DB-007",
      "title": "Implement tag-based query functions",
      "description": "Build AND, OR, and NOT tag query functions using INTERSECT/UNION/NOT IN patterns against the recipe_tags table.",
      "spec": "specs/database.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "DB-008",
      "title": "Implement full-text search query",
      "description": "Build a search function using the FTS5 virtual table to search recipe titles and body content, returning results ranked by relevance.",
      "spec": "specs/database.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "DB-009",
      "title": "Implement re-index operation",
      "description": "Build a re-index command that reads the document column for all recipes, re-parses frontmatter/body, and rebuilds extracted columns, recipe_tags, and FTS index.",
      "spec": "specs/database.md",
      "column": "backlog",
      "priority": "low"
    },
    {
      "id": "DB-010",
      "title": "Write unit tests for database layer",
      "description": "Test migration runner, recipe CRUD operations, tag queries (AND/OR/NOT), full-text search, constraint enforcement, and transactional integrity.",
      "spec": "specs/database.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "API-001",
      "title": "Create response envelope helpers",
      "description": "Build utility functions for the standard JSON response envelope: success (single + list), error, and pagination meta. Include requestId generation.",
      "spec": "specs/api-routes.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "API-002",
      "title": "Implement request validation middleware",
      "description": "Build a reusable validation layer for incoming request bodies and query parameters. Return 400 with structured error details on failure. Strip unknown fields.",
      "spec": "specs/api-routes.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "API-003",
      "title": "Implement GET /api/v1/recipes (list)",
      "description": "Create the recipe list endpoint with pagination (page, pageSize), sorting (createdAt, updatedAt, title), and optional difficulty filter. Return summary objects without document body.",
      "spec": "specs/api-routes.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "API-004",
      "title": "Implement GET /api/v1/recipes/:slug (detail)",
      "description": "Create the recipe detail endpoint that returns the full recipe object including parsed Markdown body. Return 404 if slug not found.",
      "spec": "specs/api-routes.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "API-005",
      "title": "Implement POST /api/v1/recipes (create)",
      "description": "Create the recipe creation endpoint. Validate request body, auto-generate id/slug/createdAt/updatedAt/totalTime, persist via the database write path, and return 201 with the full recipe.",
      "spec": "specs/api-routes.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "API-006",
      "title": "Implement PUT /api/v1/recipes/:slug (full update)",
      "description": "Create the full recipe replacement endpoint. Require all writable fields, preserve id and createdAt, set updatedAt, regenerate slug if title changed. Return 200 with updated recipe.",
      "spec": "specs/api-routes.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "API-007",
      "title": "Implement PATCH /api/v1/recipes/:slug (partial update)",
      "description": "Create the partial update endpoint with merge semantics: top-level fields replaced, tag groups replaced per-group, body replaces entirely if provided. Return 200 with full updated recipe.",
      "spec": "specs/api-routes.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "API-008",
      "title": "Implement DELETE /api/v1/recipes/:slug",
      "description": "Create the recipe deletion endpoint. Remove the recipe and return 204 No Content. Return 404 if slug not found.",
      "spec": "specs/api-routes.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "API-009",
      "title": "Implement GET /api/v1/recipes/search (full-text search)",
      "description": "Create the full-text search endpoint using FTS5. Accept q parameter, return paginated recipe summaries ordered by relevance. Return 400 if q is missing.",
      "spec": "specs/api-routes.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "API-010",
      "title": "Implement GET /api/v1/recipes/query (tag query)",
      "description": "Create the tag-based query endpoint supporting include (AND), any (OR), and exclude (NOT) parameters as comma-separated group:value pairs. Return paginated results with sorting.",
      "spec": "specs/api-routes.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "API-011",
      "title": "Implement GET /api/v1/tags endpoints",
      "description": "Create endpoints to list all tags grouped with usage counts (GET /api/v1/tags) and list tags within a specific group (GET /api/v1/tags/:group).",
      "spec": "specs/api-routes.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "API-012",
      "title": "Set up SvelteKit API route file structure",
      "description": "Create the SvelteKit file-based route structure under src/routes/api/v1/ with +server.ts files for recipes, recipes/[slug], recipes/search, recipes/query, tags, and tags/[group].",
      "spec": "specs/api-routes.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "API-013",
      "title": "Write integration tests for API routes",
      "description": "Test all API endpoints: CRUD operations, pagination, sorting, search, tag queries, validation error responses, 404 handling, and response envelope format.",
      "spec": "specs/api-routes.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "AUTH-001",
      "title": "Write users and sessions migration files",
      "description": "Create 004_create_users.sql and 005_create_sessions.sql migration files with the users table, sessions table, and their indexes.",
      "spec": "specs/auth.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "AUTH-002",
      "title": "Define User and Session TypeScript types",
      "description": "Create TypeScript interfaces for User (id, email, displayName, createdAt, updatedAt) and Session (id, userId, createdAt, expiresAt). Exclude passwordHash from the public User type.",
      "spec": "specs/auth.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "AUTH-003",
      "title": "Implement password hashing utility",
      "description": "Create a utility module for bcrypt password hashing (cost factor 10) and comparison. Enforce password length rules (8–128 characters).",
      "spec": "specs/auth.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "AUTH-004",
      "title": "Implement session token generation and management",
      "description": "Create functions for generating cryptographically random 32-byte hex session tokens, creating session rows, validating sessions, extending expiry (sliding window at 50% lifetime), and deleting sessions.",
      "spec": "specs/auth.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "AUTH-005",
      "title": "Implement SvelteKit handle hook for session validation",
      "description": "Add session validation in src/hooks.server.ts: read the session cookie, look up the token, load the user into event.locals.user. Update app.d.ts with the Locals type.",
      "spec": "specs/auth.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "AUTH-006",
      "title": "Implement POST /api/v1/auth/register",
      "description": "Create the registration endpoint: validate email/displayName/password, hash password, insert user, return 201 with user data. Handle 409 for duplicate emails.",
      "spec": "specs/auth.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "AUTH-007",
      "title": "Implement POST /api/v1/auth/login",
      "description": "Create the login endpoint: validate credentials, compare password hash, create session row, set session cookie, return user data. Return generic 401 on failure.",
      "spec": "specs/auth.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "AUTH-008",
      "title": "Implement POST /api/v1/auth/logout",
      "description": "Create the logout endpoint: delete the session row, clear the session cookie, return 204. Idempotent if no session exists.",
      "spec": "specs/auth.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "AUTH-009",
      "title": "Implement GET /api/v1/auth/me",
      "description": "Create the current-user endpoint: return the authenticated user's data from event.locals.user. Return 401 if not authenticated.",
      "spec": "specs/auth.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "AUTH-010",
      "title": "Implement requireAuth helper and protect write endpoints",
      "description": "Create a reusable requireAuth function that throws 401 if event.locals.user is missing. Add it to POST/PUT/PATCH/DELETE recipe endpoints.",
      "spec": "specs/auth.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "AUTH-011",
      "title": "Implement expired session cleanup",
      "description": "Build a function to delete expired sessions from the sessions table. Can be called on a schedule or on-demand.",
      "spec": "specs/auth.md",
      "column": "backlog",
      "priority": "low"
    },
    {
      "id": "AUTH-012",
      "title": "Write tests for auth system",
      "description": "Test registration (valid, duplicate email, invalid input), login (valid, wrong password, wrong email), logout, session validation, session expiry, requireAuth middleware, and cookie handling.",
      "spec": "specs/auth.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "SQ-001",
      "title": "Implement tag query parser",
      "description": "Build the parser that accepts comma-separated group:value strings from API query parameters, validates group and value, deduplicates, and detects contradictory queries (tag in both include and exclude).",
      "spec": "specs/search-and-query.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "SQ-002",
      "title": "Implement tag query SQL builder",
      "description": "Build the SQL generator that translates a parsed TagQuery (AND/OR/NOT operators) into parameterized SQL using INTERSECT, UNION, and NOT IN subqueries against the recipe_tags table.",
      "spec": "specs/search-and-query.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "SQ-003",
      "title": "Implement full-text search query processing",
      "description": "Build the search query processor: sanitize user input (strip FTS5 operators), tokenize, append prefix wildcard to last term, and execute against recipes_fts with BM25 ranking (title weight 10.0, body weight 1.0).",
      "spec": "specs/search-and-query.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "SQ-004",
      "title": "Implement sort parser and SQL generation",
      "description": "Build the sort option parser that accepts a sort string (e.g., '-createdAt'), validates against allowed fields (createdAt, updatedAt, title), and generates ORDER BY clauses with a secondary sort on id for stability.",
      "spec": "specs/search-and-query.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "SQ-005",
      "title": "Implement pagination logic",
      "description": "Build the pagination module: validate page/pageSize parameters, calculate offset, execute COUNT query for total items, and assemble pagination meta (page, pageSize, totalItems, totalPages).",
      "spec": "specs/search-and-query.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "SQ-006",
      "title": "Build composable query builder",
      "description": "Create the QueryBuilder that composes tag filters, full-text search, difficulty filter, sorting, and pagination into a single parameterized SQL query. Ensure all user input is passed as bind parameters.",
      "spec": "specs/search-and-query.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "SQ-007",
      "title": "Implement query input validation and error handling",
      "description": "Add validation for all query inputs: max tags per operator (10), max search query length (200 chars), invalid sort fields, out-of-range pagination. Return structured errors per the error handling table in the spec.",
      "spec": "specs/search-and-query.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "SQ-008",
      "title": "Write unit tests for search and query engine",
      "description": "Test tag query parsing (valid, invalid, contradictory), SQL generation for all operator combinations, FTS query sanitization and prefix matching, sort parsing, pagination calculation, and query builder composition.",
      "spec": "specs/search-and-query.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "BA-001",
      "title": "Set up Deno project with deno.json config",
      "description": "Create deno.json with compiler options, task definitions (dev, build, preview, check, test, lint, fmt), import map aliases ($lib), and nodeModulesDir setting.",
      "spec": "specs/backend-architecture.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "BA-002",
      "title": "Create SvelteKit project structure",
      "description": "Set up svelte.config.js, vite.config.ts, app.html, and the directory skeleton: src/lib/server/db, src/lib/server/auth, src/lib/server/middleware, src/lib/server/services, src/lib/models, src/lib/utils, src/routes/api/v1.",
      "spec": "specs/backend-architecture.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "BA-003",
      "title": "Implement app.d.ts with Locals type declarations",
      "description": "Define the App.Locals interface with requestId and optional user fields, establishing the typed contract for SvelteKit's event.locals.",
      "spec": "specs/backend-architecture.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "BA-004",
      "title": "Implement request ID middleware hook",
      "description": "Create the requestId handle hook in hooks.server.ts that generates a ULID per request, attaches it to event.locals.requestId, and sets the X-Request-Id response header.",
      "spec": "specs/backend-architecture.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "BA-005",
      "title": "Implement AppError class hierarchy",
      "description": "Create src/lib/models/errors.ts with AppError base class and subclasses: NotFoundError, ValidationError, ConflictError, AuthError. Each carries a code, message, HTTP status, and optional details.",
      "spec": "specs/backend-architecture.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "BA-006",
      "title": "Implement withErrorHandling route wrapper",
      "description": "Create the withErrorHandling utility in src/lib/server/middleware/error-handler.ts that catches AppError instances in route handlers and converts them to JSON error responses with the correct status code.",
      "spec": "specs/backend-architecture.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "BA-007",
      "title": "Implement response envelope helpers",
      "description": "Create src/lib/utils/response.ts with success(), listSuccess(), and errorResponse() functions that produce the standard JSON response envelope with requestId and pagination meta.",
      "spec": "specs/backend-architecture.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "BA-008",
      "title": "Implement environment config loader",
      "description": "Create src/lib/server/config.ts that reads environment variables (DATABASE_PATH, SESSION_COOKIE, SESSION_MAX_AGE, BCRYPT_COST, NODE_ENV) with typed defaults and throws on missing required values.",
      "spec": "specs/backend-architecture.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "BA-009",
      "title": "Implement handleError hook for unexpected errors",
      "description": "Add the handleError export to hooks.server.ts that logs the full error server-side with the requestId and returns a sanitized error response to the client.",
      "spec": "specs/backend-architecture.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "BA-010",
      "title": "Set up test directory structure and conventions",
      "description": "Create tests/unit and tests/integration directories. Add a sample test file verifying the Deno test runner works with @std/assert. Document test naming conventions.",
      "spec": "specs/backend-architecture.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "IMP-001",
      "title": "Implement URL validator for import pipeline",
      "description": "Build the URL validation module: check for valid absolute URL with http/https scheme, block private/internal IP ranges (SSRF prevention), enforce 2048 char max length, and support a configurable domain blocklist.",
      "spec": "specs/recipe-import.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "IMP-002",
      "title": "Implement HTTP fetcher for import pipeline",
      "description": "Build the fetcher module that issues an HTTP GET with a custom User-Agent, 15-second timeout, 5 MB max response size, and max 5 redirects. Return the HTML body or a typed fetch error.",
      "spec": "specs/recipe-import.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "IMP-003",
      "title": "Implement JSON-LD recipe extractor",
      "description": "Parse <script type=\"application/ld+json\"> blocks from HTML, locate Schema.org Recipe objects (including @graph arrays), and extract all mapped fields (name, recipeIngredient, recipeInstructions, times, yield, author, image, etc.).",
      "spec": "specs/recipe-import.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "IMP-004",
      "title": "Implement microdata recipe extractor",
      "description": "Walk the DOM for elements with itemscope/itemtype containing schema.org/Recipe, collect itemprop values, and map to the same field mapping as JSON-LD extraction.",
      "spec": "specs/recipe-import.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "IMP-005",
      "title": "Implement fallback HTML scraper",
      "description": "Build heuristic-based extraction: find title from h1/og:title/title, ingredients from ul/ol in ingredient-like containers, instructions from ol in instruction/direction/step/method containers, and image from og:image or largest img.",
      "spec": "specs/recipe-import.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "IMP-006",
      "title": "Implement extraction strategy dispatcher",
      "description": "Build the extractor module that tries JSON-LD, microdata, and fallback scraping in priority order, short-circuiting on the first success. Return extracted data with the strategy used and per-field confidence levels.",
      "spec": "specs/recipe-import.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "IMP-007",
      "title": "Implement duration and yield parsers",
      "description": "Build duration-parser.ts (human-readable strings like '30 minutes' → ISO 8601 PT30M, plain numbers assumed minutes) and yield-parser.ts (strings like '4 servings', '6', '4-6' → { default: number, unit: string }).",
      "spec": "specs/recipe-import.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "IMP-008",
      "title": "Implement tag inferrer for imported recipes",
      "description": "Build tag-inferrer.ts: map recipeCuisine → tags.cuisine, recipeCategory → tags.meal, scan keywords/title for dietary terms → tags.diet, remaining keywords → tags.custom. Lowercase, hyphenate, validate against tag regex.",
      "spec": "specs/recipe-import.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "IMP-009",
      "title": "Implement recipe normalizer",
      "description": "Build normalizer.ts that transforms raw extracted data into an ImportDraft: generate ULID/slug/timestamps, set source metadata, assemble Markdown body (## Ingredients, ## Instructions, ## Notes), infer tags, run validation, and collect warnings.",
      "spec": "specs/recipe-import.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "IMP-010",
      "title": "Implement import service orchestrator",
      "description": "Build import-service.ts that orchestrates the full pipeline: validate URL → fetch HTML → extract recipe → normalize to draft. Handle errors at each stage and return the ImportDraft or a typed error.",
      "spec": "specs/recipe-import.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "IMP-011",
      "title": "Implement POST /api/v1/recipes/import endpoint",
      "description": "Create the SvelteKit route at src/routes/api/v1/recipes/import/+server.ts. Require auth, accept { url } body, call import service, return the ImportDraft as a 200 response or error.",
      "spec": "specs/recipe-import.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "IMP-012",
      "title": "Write tests for recipe import pipeline",
      "description": "Test URL validation (valid, private IP, too long), JSON-LD extraction (single Recipe, @graph, missing fields), microdata extraction, fallback scraping, duration/yield parsing, tag inference, normalization, and end-to-end import service.",
      "spec": "specs/recipe-import.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "OCR-001",
      "title": "Implement image validator for OCR pipeline",
      "description": "Build the image validation module: check magic bytes for JPEG/PNG/WebP/HEIC, enforce 10 MB max file size, validate dimensions (min 200x200, max 8000x8000).",
      "spec": "specs/ocr-pipeline.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "OCR-002",
      "title": "Implement image preprocessor",
      "description": "Build the image preprocessing module using sharp: auto-orient from EXIF, convert to grayscale, resize if longest edge exceeds 4000px, normalize HEIC to PNG.",
      "spec": "specs/ocr-pipeline.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "OCR-003",
      "title": "Implement Tesseract.js OCR engine wrapper",
      "description": "Create the OCR engine module: initialize Tesseract.js worker with LSTM mode, configure language support, process images with 60-second timeout, return full text and confidence score.",
      "spec": "specs/ocr-pipeline.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "OCR-004",
      "title": "Implement OCR text cleaner",
      "description": "Build the text cleanup module: normalize whitespace, apply common OCR substitution corrections (l→1, O→0, rn→m, etc.) in recipe context, remove page artifacts like headers/footers and page numbers.",
      "spec": "specs/ocr-pipeline.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "OCR-005",
      "title": "Implement recipe text parser",
      "description": "Build the recipe parser that identifies title, ingredients, instructions, servings, and time values from cleaned OCR text using heuristic section detection. Assign confidence levels to each section.",
      "spec": "specs/ocr-pipeline.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "OCR-006",
      "title": "Implement OCR draft normalizer",
      "description": "Build the normalizer that transforms parsed OCR output into a draft Recipe object: generate ULID/slug/timestamps, set source.type to 'ocr', build Markdown body, infer tags from title/ingredients, run validation, collect warnings.",
      "spec": "specs/ocr-pipeline.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "OCR-007",
      "title": "Define OCR TypeScript types",
      "description": "Create TypeScript interfaces for OcrDraft, OcrWarning, OcrParseResult, and RightsAttestation in src/lib/models/ocr-types.ts.",
      "spec": "specs/ocr-pipeline.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "OCR-008",
      "title": "Implement rights attestation validation",
      "description": "Add attestation enforcement to POST /api/v1/recipes: when source.type is 'ocr', require the attestation field with a valid attestationType. Return 400 OCR_ATTESTATION_REQUIRED if missing.",
      "spec": "specs/ocr-pipeline.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "OCR-009",
      "title": "Implement OCR service orchestrator",
      "description": "Build ocr-service.ts that orchestrates the full pipeline: validate image → preprocess → OCR → clean text → parse → normalize to draft. Handle errors at each stage and return OcrDraft or typed error.",
      "spec": "specs/ocr-pipeline.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "OCR-010",
      "title": "Implement POST /api/v1/recipes/ocr endpoint",
      "description": "Create the SvelteKit route at src/routes/api/v1/recipes/ocr/+server.ts. Require auth, accept multipart/form-data with image and optional language, call OCR service, return OcrDraft as 200 response or error.",
      "spec": "specs/ocr-pipeline.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "OCR-011",
      "title": "Write tests for OCR pipeline",
      "description": "Test image validation (valid formats, oversized, too small, corrupt), image preprocessing, OCR engine wrapper (mock Tesseract), text cleaner substitutions, recipe parser section detection, normalizer, attestation enforcement, and end-to-end OCR service.",
      "spec": "specs/ocr-pipeline.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "SLE-001",
      "title": "Implement ingredient line parser",
      "description": "Build the parser that transforms raw ingredient lines from Markdown into ParsedIngredient objects: extract quantity (integers, decimals, fractions, mixed numbers, ranges), unit, name, prep notes, and parenthetical notes.",
      "spec": "specs/shopping-list-engine.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "SLE-002",
      "title": "Define shopping list TypeScript types",
      "description": "Create TypeScript interfaces for ParsedIngredient, ShoppingListRequest, ShoppingList, ShoppingListItem, ShoppingListRecipeRef, and ScalingRequest in src/lib/models/shopping-list.ts.",
      "spec": "specs/shopping-list-engine.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "SLE-003",
      "title": "Build unit dictionary and normalizer",
      "description": "Create the unit dictionary mapping aliases to canonical unit names (tsp, tbsp, cup, oz, lb, g, kg, ml, l, etc.) with case-insensitive matching. Classify each unit by type (volume, weight, count).",
      "spec": "specs/shopping-list-engine.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "SLE-004",
      "title": "Implement unit conversion logic",
      "description": "Build within-type unit conversion functions for volume (tsp→tbsp→cup, ml→l) and weight (oz→lb, g→kg). Apply threshold-based upsizing (e.g., 3 tsp → 1 tbsp, 16 oz → 1 lb).",
      "spec": "specs/shopping-list-engine.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "SLE-005",
      "title": "Implement recipe scaling math",
      "description": "Build the scaling module that adjusts ingredient quantities based on target vs. default servings. Handle null quantities, enforce 0.25×–10× scaling limits, and round to friendly fractions.",
      "spec": "specs/shopping-list-engine.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "SLE-006",
      "title": "Implement friendly fraction formatter",
      "description": "Build a utility that converts decimal quantities to display strings using common fractions (¼, ⅓, ½, ⅔, ¾) and mixed numbers (1 ½, 2 ¼). Fall back to 2 decimal places for non-standard values.",
      "spec": "specs/shopping-list-engine.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "SLE-007",
      "title": "Implement ingredient name normalizer for deduplication",
      "description": "Build name normalization: lowercase, trim whitespace, strip articles (a/an/the), basic singularization (suffix-based), and remove common modifiers (fresh, dried, frozen, organic, large, small, etc.).",
      "spec": "specs/shopping-list-engine.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "SLE-008",
      "title": "Implement multi-recipe aggregation and deduplication",
      "description": "Build the aggregation pipeline: group parsed ingredients by normalized name, merge quantities with compatible units, keep incompatible units as separate line items, and handle null-quantity merging rules.",
      "spec": "specs/shopping-list-engine.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "SLE-009",
      "title": "Implement shopping list service orchestrator",
      "description": "Build shopping-list-service.ts that orchestrates the full pipeline: resolve recipes → parse ingredients → scale → normalize names → aggregate → format output. Handle errors at each stage.",
      "spec": "specs/shopping-list-engine.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "SLE-010",
      "title": "Implement POST /api/v1/shopping-list endpoint",
      "description": "Create the SvelteKit route at src/routes/api/v1/shopping-list/+server.ts. Require auth, validate request body (items array, servings, limits), call shopping list service, return ShoppingList response.",
      "spec": "specs/shopping-list-engine.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "SLE-011",
      "title": "Write tests for shopping list engine",
      "description": "Test ingredient parsing (all quantity formats, edge cases, unparseable lines), unit normalization, unit conversion, scaling math, fraction formatting, name normalization, dedup/aggregation rules, and end-to-end shopping list service.",
      "spec": "specs/shopping-list-engine.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "REC-001",
      "title": "Write user_preferences and recipe_interactions migrations",
      "description": "Create migration files for the user_preferences table (user_id, pref_type, tag_group, tag_value) and recipe_interactions table (id, user_id, recipe_id, action, created_at) with indexes.",
      "spec": "specs/recommendation-engine.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "REC-002",
      "title": "Define recommendation TypeScript types",
      "description": "Create TypeScript interfaces for TagFrequencyProfile, TagCount, UserPreferences, RecommendationQuery, ScoredRecipe, and score breakdown in src/lib/models/recommendation.ts.",
      "spec": "specs/recommendation-engine.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "REC-003",
      "title": "Implement tag frequency profile builder",
      "description": "Build the module that queries recipe_tags for a user's collection and returns a TagFrequencyProfile with per-tag counts and frequencies.",
      "spec": "specs/recommendation-engine.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "REC-004",
      "title": "Implement user preferences CRUD",
      "description": "Build functions to read, upsert, and delete user preferences (boosts and suppressions) in the user_preferences table. Enforce max 20 total and no contradictions.",
      "spec": "specs/recommendation-engine.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "REC-005",
      "title": "Implement tag similarity scorer",
      "description": "Build the tag similarity scoring function that compares a candidate recipe's tags against the user's tag frequency profile and returns a 0–1 score.",
      "spec": "specs/recommendation-engine.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "REC-006",
      "title": "Implement preference boost scorer",
      "description": "Build the preference boost/suppression scoring function: +0.15 per boosted tag (capped at +1.0), -0.5 per suppressed tag (floored at -1.0).",
      "spec": "specs/recommendation-engine.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "REC-007",
      "title": "Implement freshness bonus and composite score calculator",
      "description": "Build the freshness bonus function (0.1 decaying over 30 days) and the composite score calculator that combines tag similarity (0.6), preference boost (0.25), freshness (0.1), and diversity penalty (0.05).",
      "spec": "specs/recommendation-engine.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "REC-008",
      "title": "Implement diversity re-ranking",
      "description": "Build the greedy diversity re-ranker that penalizes candidates sharing too many tags with already-selected recommendations, applied over a 3x candidate pool.",
      "spec": "specs/recommendation-engine.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "REC-009",
      "title": "Implement cold-start fallback strategies",
      "description": "Build cold-start handling: return popular recipes (by view count) for new users, apply confidence discount for sparse collections (< 10 recipes), and supplement with popular recipes to fill the set.",
      "spec": "specs/recommendation-engine.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "REC-010",
      "title": "Implement reason generation",
      "description": "Build the reason generator that produces human-readable explanation strings from the scoring breakdown using the defined templates.",
      "spec": "specs/recommendation-engine.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "REC-011",
      "title": "Implement recommendation service orchestrator",
      "description": "Build recommendation-service.ts that orchestrates the full pipeline: build profile → apply query filters → score candidates → diversify → generate reasons → return ranked results.",
      "spec": "specs/recommendation-engine.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "REC-012",
      "title": "Implement GET /api/v1/recommendations endpoint",
      "description": "Create the SvelteKit route for personalized recommendations. Require auth, parse query params (limit, difficulty, maxTime, excludeOwned, tags, mood), call recommendation service, return scored results.",
      "spec": "specs/recommendation-engine.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "REC-013",
      "title": "Implement GET /api/v1/recommendations/profile endpoint",
      "description": "Create the endpoint that returns the user's computed tag frequency profile and current preferences.",
      "spec": "specs/recommendation-engine.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "REC-014",
      "title": "Implement PUT /api/v1/recommendations/preferences endpoint",
      "description": "Create the endpoint to update user taste preferences (boosts and suppressions). Validate constraints and return updated preferences.",
      "spec": "specs/recommendation-engine.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "REC-015",
      "title": "Implement POST /api/v1/recipes/:slug/interact endpoint",
      "description": "Create the endpoint to record user interactions (view, save) with recipes. Require auth, validate action, store in recipe_interactions, return 204.",
      "spec": "specs/recommendation-engine.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "REC-016",
      "title": "Write tests for recommendation engine",
      "description": "Test tag frequency profile building, preference CRUD and validation, tag similarity scoring, preference boost scoring, composite score calculation, diversity re-ranking, cold-start fallbacks, reason generation, and end-to-end recommendation service.",
      "spec": "specs/recommendation-engine.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "FA-001",
      "title": "Set up Tailwind CSS 4 with app.css theme config",
      "description": "Create src/app.css with Tailwind 4 @import and @theme block defining color palette, typography, border radius, and shadows. Configure dark mode overrides via @theme dark.",
      "spec": "specs/frontend-architecture.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "FA-002",
      "title": "Initialize shadcn-svelte and install base components",
      "description": "Run shadcn-svelte init, then add initial component set: Button, Card, Input, Label, Textarea, Select, Dialog, Badge, Separator, Skeleton, Toast, DropdownMenu.",
      "spec": "specs/frontend-architecture.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "FA-003",
      "title": "Create root layout with Navbar and Footer",
      "description": "Build +layout.svelte with Navbar, main content area, and Footer. Create +layout.server.ts that passes auth state (locals.user) to the layout.",
      "spec": "specs/frontend-architecture.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "FA-004",
      "title": "Build Navbar component",
      "description": "Create Navbar.svelte with app title/logo, navigation links (Recipes, Search, Shopping List, Recommendations), and user menu (login/register or user dropdown with logout).",
      "spec": "specs/frontend-architecture.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "FA-005",
      "title": "Implement dark mode toggle and theme utility",
      "description": "Create $lib/utils/theme.ts with getTheme/setTheme functions (localStorage + prefers-color-scheme fallback). Add dark mode toggle to Navbar.",
      "spec": "specs/frontend-architecture.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "FA-006",
      "title": "Create API client base and domain modules",
      "description": "Build $lib/api/client.ts with typed fetch wrapper (get, post, put, patch, delete) and error handling. Create $lib/api/recipes.ts and $lib/api/auth.ts domain modules.",
      "spec": "specs/frontend-architecture.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "FA-007",
      "title": "Create auth runes store",
      "description": "Build $lib/stores/auth.svelte.ts with runes-based current user state (setUser, getUser). Wire it to the root layout's auth data.",
      "spec": "specs/frontend-architecture.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "FA-008",
      "title": "Create global error page",
      "description": "Build src/routes/+error.svelte displaying the error status code, message, and a link to go home. Style with Tailwind.",
      "spec": "specs/frontend-architecture.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "FA-009",
      "title": "Create shared UI components (LoadingSpinner, EmptyState, ErrorBanner, Pagination)",
      "description": "Build reusable shared components in $lib/components/shared/: LoadingSpinner, EmptyState (icon + message + optional action), ErrorBanner (dismissible error), Pagination (page controls).",
      "spec": "specs/frontend-architecture.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "FA-010",
      "title": "Set up frontend route skeleton with placeholder pages",
      "description": "Create the route directory structure for all pages (recipes, recipes/new, recipes/import, recipes/ocr, recipes/[slug], recipes/[slug]/edit, search, shopping-list, recommendations, auth/login, auth/register) with minimal placeholder +page.svelte files.",
      "spec": "specs/frontend-architecture.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "FA-011",
      "title": "Implement auth guard pattern for protected routes",
      "description": "Add +page.server.ts load functions to protected routes (recipes/new, recipes/import, recipes/ocr, recipes/[slug]/edit, shopping-list, recommendations) that redirect to /auth/login if locals.user is not set.",
      "spec": "specs/frontend-architecture.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "FA-012",
      "title": "Write tests for frontend architecture utilities",
      "description": "Test API client (success and error responses), theme utility (getTheme/setTheme), and auth store (setUser/getUser).",
      "spec": "specs/frontend-architecture.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "UC-001",
      "title": "Add semantic color tokens to app.css",
      "description": "Add success, warning, and info color tokens to the @theme block in src/app.css alongside the existing palette.",
      "spec": "specs/ui-components.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "UC-002",
      "title": "Install additional shadcn-svelte components",
      "description": "Install Checkbox, Switch, Tabs, and Tooltip shadcn-svelte components via CLI into $lib/components/ui/.",
      "spec": "specs/ui-components.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "UC-003",
      "title": "Install and configure lucide-svelte icon library",
      "description": "Add lucide-svelte dependency and verify tree-shaking works for individual icon imports.",
      "spec": "specs/ui-components.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "UC-004",
      "title": "Build RecipeCard component",
      "description": "Create RecipeCard.svelte displaying image thumbnail, title, difficulty badge, time display, and tag badges with responsive sizing (min 280px, 16:9 image).",
      "spec": "specs/ui-components.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "UC-005",
      "title": "Build RecipeHeader component",
      "description": "Create RecipeHeader.svelte with recipe title, source attribution, difficulty badge, time breakdown, servings with scaling, full tag list, and owner action buttons (edit/delete).",
      "spec": "specs/ui-components.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "UC-006",
      "title": "Build IngredientList and InstructionSteps components",
      "description": "Create IngredientList.svelte with checkbox items and scaling support, and InstructionSteps.svelte with numbered step rendering.",
      "spec": "specs/ui-components.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "UC-007",
      "title": "Build ScalingControl component",
      "description": "Create ScalingControl.svelte with increment/decrement buttons, current serving display, and reset button. Enforce min 1, max 100 constraints.",
      "spec": "specs/ui-components.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "UC-008",
      "title": "Build TagBadgeList component with group color mapping",
      "description": "Create TagBadgeList.svelte rendering color-coded tag badges by group (cuisine=blue, meal=green, diet=purple, technique=orange, custom=secondary) with optional truncation and click handler.",
      "spec": "specs/ui-components.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "UC-009",
      "title": "Build SearchBar component",
      "description": "Create SearchBar.svelte with debounced input (300ms), search icon, clear button, and Enter-to-submit behavior.",
      "spec": "specs/ui-components.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "UC-010",
      "title": "Build TagFilter component",
      "description": "Create TagFilter.svelte with collapsible tag group sections, three-state toggle (include/exclude/clear) per tag, usage counts, and a clear-all button.",
      "spec": "specs/ui-components.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "UC-011",
      "title": "Build SearchResults component",
      "description": "Create SearchResults.svelte with responsive RecipeCard grid (1/2/3/4 columns), results count header, empty state, and skeleton loading state.",
      "spec": "specs/ui-components.md",
      "column": "backlog",
      "priority": "high"
    },
    {
      "id": "UC-012",
      "title": "Build ConfirmDialog component",
      "description": "Create ConfirmDialog.svelte wrapping shadcn Dialog with configurable title, description, confirm/cancel labels, and destructive variant support.",
      "spec": "specs/ui-components.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "UC-013",
      "title": "Implement mobile-responsive Navbar with hamburger menu",
      "description": "Extend Navbar.svelte with a mobile hamburger menu that collapses nav links into a slide-out drawer on small screens.",
      "spec": "specs/ui-components.md",
      "column": "backlog",
      "priority": "medium"
    },
    {
      "id": "UC-014",
      "title": "Write tests for custom UI components",
      "description": "Test RecipeCard rendering, ScalingControl constraints, TagBadgeList truncation, SearchBar debounce, TagFilter state toggling, Pagination bounds, and ConfirmDialog interactions.",
      "spec": "specs/ui-components.md",
      "column": "backlog",
      "priority": "high"
    }
  ]
}
